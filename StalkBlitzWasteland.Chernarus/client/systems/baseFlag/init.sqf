dcdj=missionNamespace getVariable['dcdj',[]];sijt=[];mcdf=[[],[[],"EMPTY"]]call zfdd;amng=[[],[[],"EMPTY"]]call zfdd;['baseFlag','Base flag',"Radio",[],{[15,"Deploying Base Flag %1",[],{klvd=[player,getPosATL player];publicVariableServer"klvd";'baseFlag'call tfyi}]call byng}]call xwjs;["<t color='#3cff00'><img image='client\systems\baseFlag\icons\repack.paa' /> Repack Base Flag</t>",{(_this select 0)isKindOf"Land_Com_tower_ep1"&&{{(_x select 3)==(_this select 0)}count dcdj>0}},{[60,'Repacking Base Flag %1',[_this select 0],{'baseFlag'call xpip;cwip=[player,_this select 0];publicVariableServer"cwip"}]call byng}]call hzak;["<t color='#ff0000'><img image='client\systems\baseFlag\icons\destroy.paa' /> Destroy Base Flag</t>",{(_this select 0)isKindOf"Land_Com_tower_ep1"&&{{(_x select 3)==(_this select 0)}count dcdj>0}},{[30,'Destroying Base Flag %1',[_this select 0],{cwip=[player,_this select 0];publicVariableServer"cwip"}]call byng}]call hzak;if(!hasInterface)exitwith{};[]spawn{waitUntil{!isNull player&&player==player};waitUntil{!(isNull(findDisplay 46))};[]call ezgl;(findDisplay 12 displayCtrl 51)ctrlAddEventHandler["Draw","_this call fbjd"];"dcdj"addPublicVariableEventHandler{[]call ezgl;[xtsf,'flags',[amng]call shdj]call zbrm};['updateBaseFlags',{[]call ezgl;[xtsf,'flags',[amng]call shdj]call zbrm}]call ngfr;['groupChange',{[]call ezgl;[xtsf,'flags',[amng]call shdj]call zbrm}]call ngfr;['baseFlagRadar',{_xkga=_this select 0;_dmnj=_this select 1 select 0;_nrdv=[_xkga]call mlks;_zuar=(_this select 1 select 1)call fqef;if(([[_zuar]]call mlks)=="FRIENDLY")then{(format["baseFlag%1",_dmnj])setMarkerColorLocal(_nrdv call lpkz);if(player in _xkga)then{_cdih=([mcdf,_dmnj]call uvzk)select 1;if(_cdih in["EMPTY","FRIENDLY"]&&_nrdv in["ENEMY","MIXED"])then{hint"WARNING! An enemy player has entered the area"}}};[mcdf,_dmnj,[_xkga,_nrdv]]call zbrm}]call ngfr;['baseFlagBlock',{_xkga=_this select 0;_dmnj=_this select 1 select 0;_nrdv=[_xkga]call mlks;[amng,_dmnj,[_xkga,_nrdv]]call zbrm;[xtsf,'flags',[amng]call shdj]call zbrm;['respawnDialogUpdate']call shqc}]call ngfr;[xtsf,'flags',[amng]call shdj]call zbrm};[format['<t color="#3cff00"><img image="client\systems\baseFlag\icons\redeploy.paa" /> Redeploy ($%1)</t>','redeployCost'call bdra],{(_this select 0)isKindOf"Land_Com_tower_ep1"&&{([]call pqoo)>=('redeployCost'call bdra)}},{createDialog'BLrespawnDialog';player setPosATL(markerPos'respawn_west');100 call tziw},5]call hzak;