#include "vbvk.sqf"private["_iygs","_egvh"];_qcar={_pesa=_this select 0;player moveInCargo(objectFromNetId _pesa);[]spawn{waitUntil{vehicle player!=player};closeDialog respawnDialogIDD};true};_iygs=[_this,0,xfty,[[]],[4]]call clht;_egvh=[];[_iygs,{private["_pesa"];_pesa=objectFromNetId _key;if(!isNull _pesa&&([[_value select 0]]call cdex)=="FRIENDLY")then{private["_fykw","_tutp","_yjuv","_lapt"];_fykw='';_tutp=[];if(_value select 2<=0)then{_tutp set[count _tutp,'has no room']};if(_value select 1<100)then{_tutp set[count _tutp,'is flying too low']};if(count _tutp>0)then{_fykw=format['The vehicle %1',[_tutp,' and ']call pvam]};if(_fykw=='')then{_yjuv=[(getPosATL _pesa)]call kiuw;_lapt=getText(configFile>>"CfgVehicles">>(typeOf _pesa)>>"displayName");_fykw=format['%1 %2 of %3',_lapt,[getPosATL _pesa,(_yjuv select 1)]call knhx,_yjuv select 0]};_egvh set[count _egvh,[name(_value select 0),_fykw,_pesa,count _tutp>0,[_key],_qcar]]}}]call kqcm;_egvh