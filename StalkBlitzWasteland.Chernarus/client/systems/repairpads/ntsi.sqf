private["_qyul","_hxug","_azvk","_hqxs","_sdut","_rpls","_uejy","_dzlv","_nmvi","_interupt"];_sdut=_this select 0;_rpls=typeof _sdut;if(_sdut isKindOf"ParachuteBase")exitWith{};if(isNil"thxz")then{thxz=.1};if(!alive _sdut)exitWith{};_dzlv=getPosATL _sdut;_nmvi=10;_ymyr=false;_sdut setVehicleAmmo 1;_uejy=typeOf _sdut;_sdut vehicleChat format["Servicing %1... Please stand by...",_rpls];sleep thxz;if(!alive _sdut||_sdut distance _dzlv>_nmvi)then{breakOut"xx_reload2_xx"};_sdut vehicleChat"Repairing...";_sdut setDamage 0;sleep thxz;if(!alive _sdut||_sdut distance _dzlv>_nmvi)then{breakOut"xx_reload2_xx"};_sdut vehicleChat"Refueling...";_sdut setFuel 1;sleep thxz;_hqxs=getArray(configFile>>"CfgVehicles">>_rpls>>"magazines");if(count _hqxs>0)then{_jdqo=[];{if(!(_x in _jdqo))then{_sdut removeMagazines _x;_jdqo set[count _jdqo,_x]}}forEach _hqxs;{_sdut vehicleChat format["Reloading %1",_x];sleep thxz;if(!alive _sdut||_sdut distance _dzlv>_nmvi)exitWith{_ymyr=true};_sdut addMagazine _x}forEach _hqxs};_hxug=count(configFile>>"CfgVehicles">>_rpls>>"Turrets");if(_hxug>0)then{for"_azvk"from 0 to(_hxug - 1)do{scopeName"xx_reload2_xx";if(!alive _sdut||_sdut distance _dzlv>_nmvi)exitWith{_ymyr=true};_qyul=(configFile>>"CfgVehicles">>_rpls>>"Turrets")select _azvk;_hqxs=getArray(_qyul>>"magazines");_jdqo=[];{if(!(_x in _jdqo))then{_sdut removeMagazines _x;_jdqo set[count _jdqo,_x]}}forEach _hqxs;{_sdut vehicleChat format["Reloading %1",_x];sleep thxz;if(!alive _sdut||_sdut distance _dzlv>_nmvi)then{breakOut"xx_reload2_xx"};_sdut addMagazine _x;sleep thxz;if(!alive _sdut||_sdut distance _dzlv>_nmvi)then{breakOut"xx_reload2_xx"}}forEach _hqxs;_sblm=count(_qyul>>"Turrets");if(_sblm>0)then{for"_azvk"from 0 to(_sblm - 1)do{_ulez=(_qyul>>"Turrets")select _azvk;_hqxs=getArray(_ulez>>"magazines");_jdqo=[];{if(!(_x in _jdqo))then{_sdut removeMagazines _x;_jdqo set[count _jdqo,_x]}}forEach _hqxs;{_sdut vehicleChat format["Reloading %1",_x];sleep thxz;if(!alive _sdut||_sdut distance _dzlv>_nmvi)then{breakOut"xx_reload2_xx"};_sdut addMagazine _x;sleep thxz;if(!alive _sdut||_sdut distance _dzlv>_nmvi)then{breakOut"xx_reload2_xx"}}forEach _hqxs}}}};if(!_ymyr)then{_sdut setVehicleAmmo 1;_sdut vehicleChat format["%1 is ready...",_uejy]}else{_sdut vehicleChat format["Service interrupted. Please try again.",_uejy]};if(true)exitWith{};