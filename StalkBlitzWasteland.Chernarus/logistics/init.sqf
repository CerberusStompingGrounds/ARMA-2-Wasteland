call compile preprocessFileLineNumbers"logistics\nrmb.sqf";rtkt=objNull;ysca=-1;mgua=objNull;daqi=objNull;tfyk=objNull;nfnt=missionNamespace getVariable['nfnt',[]];if(!hasInterface)exitwith{};[]spawn{waitUntil{!isNull player&&player==player};waitUntil{!isNil"bis_fnc_init"};waitUntil{!(isNull(findDisplay 46))};rmfe=("maxDistanceFromPlayer"call b_fnc_qe)select 1;cyvl=("minDistanceFromPlayer"call b_fnc_qe)select 1;qole=("maxOffsetHeight"call b_fnc_qe)select 1;klrt=("minOffsetHeight"call b_fnc_qe)select 1;mdkn=("maxCenterFromPlayer"call b_fnc_qe)select 1;sniv=("minCenterFromPlayer"call b_fnc_qe)select 1;[]call b_fnc_rb;"tfyk"addPublicVariableEventHandler{private["_xwlp","_xgcy"];_xwlp=[_this select 1,0,objNull,[objNull]]call jdly;_xgcy=[_this select 1,1,[0,0,0],[[]],[3]]call jdly;_xwlp setVelocity _xgcy};player call b_fnc_bi;player addEventHandler['respawn',{[]call b_fnc_rb;_hrvv=+wize;wize=[];ucmb=[];{_x call b_fnc_jc;nil}count _hrvv}];player addEventHandler['killed',{if(!isNull rtkt)then{[]call b_fnc_ax}}];[]spawn{echz=0;waitUntil{if(!isNull rtkt)then{_hbjx=(getPosASL player)select 2;_mmak=abs((round _hbjx)- _hbjx);if(_mmak!=echz)then{echz=_mmak;[]call b_fnc_kj}};false}};[]spawn{_xwlp=vehicle player;while{true}do{waitUntil{_xwlp!=vehicle player};{_xwlp removeAction _x}count(_xwlp getVariable['vehicleActionIds',[]]);_xwlp=vehicle player;if!(_xwlp isKindOf"Man")then{_xwlp=vehicle player;_elxv=[];{_elxv set[_foreachindex,_xwlp addAction[_x select 0,"logistics\functions\sxmn.sqf",_foreachindex,_x select 3,_x select 4,_x select 5,_x select 6,_x select 7]]}forEach wize;_xwlp setVariable['vehicleActionIds',_elxv]};waitUntil{_xwlp!=vehicle player}}};_oogr=[];while{true}do{_noun=cursorTarget;_oogr=[];recb=(vehicle player)!=player&&driver vehicle player==player;_xwlp=vehicle player;if(_xwlp==player)then{if([_noun,player]call b_fnc_ut<5&&{_noun in(5 call b_fnc_oo)})then{if(_noun call b_fnc_zw)then{orkb=_noun;_oogr set[count _oogr,"orkb"]};if(((typeOf _noun)call b_fnc_rc)>0&&!(_noun getVariable['LOG_disabled',false]))then{tiur=_noun;_oogr set[count _oogr,"tiur"];_vtzv=getText(configFile>>"CfgVehicles">>typeOf _noun>>"displayName");['show_contents',format["<t color='#c7c500'><img image='logistics\icons\unload.paa' /> Show %1 Contents</t>",_vtzv]]call b_fnc_bq;if(!isNull rtkt||!isNull kwos)then{_tanb=rtkt;if(isNull _tanb)then{_tanb=kwos};_tbyz=getText(configFile>>"CfgVehicles">>typeOf _tanb>>"displayName");_pdpi=format['Load %1 into %2',_tbyz,_vtzv];if!([_noun,_tanb]call b_fnc_hh)then{_pdpi=format["<t color='#FF0000'><img image='logistics\icons\load.paa' /> %1</t>",_pdpi]}else{_pdpi=format["<t color='#c7c500'><img image='logistics\icons\load.paa' /> %1</t>",_pdpi]};['load_object',_pdpi]call b_fnc_bq}}}}else{_hubb=(_xwlp getVariable['LOG_towedObject',objNull]);if(recb)then{if(isNull _hubb)then{_ksue=(typeOf _xwlp)call b_fnc_qe;if(count _ksue>0&&!(_xwlp getVariable['LOG_disabled',false]))then{_pdpi="";if(_xwlp isKindOf"Air")then{_racc=_xwlp modelToWorld[0,0,0];_asql=[_racc select 0,_racc select 1,(_racc select 2)-10];_rtpp=(lineIntersectsWith[ATLtoASL _racc,ATLtoASL _asql,objNull,objNull,true])-[_xwlp]- allUnits;if(count _rtpp>0)then{_rtpp=_rtpp select(count _rtpp -1)}else{_rtpp=objNull;_yojq=+_racc;_yojq set[2,(_yojq select 2)-(([_xwlp]call b_fnc_nx)select 2)/2];{if!(isPlayer _x||_x==_xwlp)then{if(_x call b_fnc_mr)exitwith{_rtpp=_x}};nil}count(nearestObjects[_yojq,["All"],5])};if(_rtpp call b_fnc_mr)then{myyw=_rtpp;_oogr set[count _oogr,"myyw"];_pdpi=format['Lift %1',getText(configFile>>"CfgVehicles">>typeOf myyw>>"displayName")]}}else{if(_xwlp isKindOf"LandVehicle")then{_fshi=_xwlp call b_fnc_nx;_racc=getPosATL _xwlp;_racc set[2,1];_rnsj=[_racc,2+((_fshi select 1)/2),(getDir vehicle player)-180]call bis_fnc_relpos;_ezcw=(lineIntersectsWith[ATLtoASL _racc,ATLtoASL _rnsj,objNull,objNull,true])-[_xwlp]- allUnits;if(count _ezcw>0)then{_ezcw=_ezcw select(count _ezcw -1)}else{_ezcw=objNull};if(_ezcw call b_fnc_mr)then{myyw=_ezcw;_oogr set[count _oogr,"myyw"];_pdpi=format["Tow %1",getText(configFile>>"CfgVehicles">>typeOf myyw>>"displayName")]}}};if(_pdpi!="")then{if([myyw,_xwlp]call b_fnc_mr&&isNull(myyw getVariable['LOG_towedObject',objNull])&&isNull(_xwlp getVariable['LOG_towedTo',objNull]))then{['tow',format["<t color='#c7c500'><img image='logistics\icons\towlift.paa' /> %1</t>",_pdpi]]call b_fnc_bq}else{['tow',format["<t color='#FF0000'><img image='logistics\icons\towlift.paa' /> %1</t>",_pdpi]]call b_fnc_bq}}}}else{if(!isNull(_xwlp getVariable['LOG_towedTo',objNull]))then{[_xwlp getVariable['LOG_towedTo',objNull],_xwlp]call b_fnc_gn};if(!isNull _hubb)then{['release',format["<t color='#d45500'><img image='logistics\icons\towlift.paa' /> Release %1</t>",getText(configFile>>"CfgVehicles">>typeOf _hubb>>"displayName")]]call b_fnc_bq}}}};if!("orkb"in _oogr)then{orkb=objNull};if!("ckzf"in _oogr)then{ckzf=objNull};if!("myyw"in _oogr)then{myyw=objNull};if!("tiur"in _oogr)then{tiur=objNull};sleep 0.1}};