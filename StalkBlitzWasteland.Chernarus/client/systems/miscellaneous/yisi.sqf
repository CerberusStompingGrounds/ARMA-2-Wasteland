bnjd=true;nbat=[localize"STR_CHANNEL_GLOBAL",localize"STR_CHANNEL_COMMAND"];hlbf=["PushToTalkCommand","PushToTalkAll"];tpbm=[["PushToTalkCommand",localize"STR_CHANNEL_COMMAND",format["%1 VON is not allowed.",localize"STR_CHANNEL_COMMAND"]],["PushToTalkAll",localize"STR_CHANNEL_GLOBAL",format["%1 VON is not allowed.",localize"STR_CHANNEL_GLOBAL"]]];if(playerSide==resistance)then{nbat=nbat+[localize"STR_CHANNEL_SIDE"];hlbf=hlbf+["PushToTalkSide"];tpbm=tpbm+[["PushToTalkSide",localize"STR_CHANNEL_SIDE",format["%1 VON not allowed on Independent",localize"STR_CHANNEL_SIDE"]]]};ibdn=localize"STR_CHANNEL_GROUP";ntnv={private["_sioa","_key","_qxyy","_nxmh","_luxw","_iqmj","_pium","_tvse"];_sioa=false;_key=_this select 1;_qxyy="";_nxmh=[];_luxw=_key in actionKeys"PushToTalk";{_nxmh=_nxmh+(actionKeys _x);true}count hlbf;_sioa=_key in _nxmh||{(_luxw&&ibdn in nbat)};if(_sioa)then{_key spawn luqy}else{if(bnjd&&_luxw)then{_iqmj=getNumber(configFile>>"RscDisplayChannel">>"idd");_pium=getNumber(configFile>>"RscDisplayChannel">>"controls">>"CA_Channel">>"cktj");_tvse=ctrlText((findDisplay _iqmj)displayCtrl _pium);if(_tvse in nbat)then{ibdn=_tvse;_key spawn luqy;_sioa=true};bnjd=false}};_sioa};luqy={private["_shii"];_shii="";{if(_this in(actionKeys(_x select 0)))then{_shii=_x select 2}else{if(ibdn==(_x select 1))then{_shii=_x select 2}};true}count tpbm;titleText[_shii,'BLACK',0.01];sleep 2;titleFadeOut 0};uwvw={private["_key","_vqlm","_iqmj","_pium"];_key=_this select 1;_vqlm=(actionKeys"NextChannel")+(actionKeys"PrevChannel");_iqmj=getNumber(configFile>>"RscDisplayChannel">>"idd");_pium=getNumber(configFile>>"RscDisplayChannel">>"controls">>"CA_Channel">>"cktj");if(_key in _vqlm)then{ibdn=ctrlText((findDisplay _iqmj)displayCtrl _pium)}};if(count nbat>0||count hlbf>0)then{(findDisplay 46)displayAddEventHandler["KeyUp","_this call uwvw"];(findDisplay 46)displayAddEventHandler["KeyDown","_this call ntnv"]};