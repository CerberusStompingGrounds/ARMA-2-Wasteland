if(!isNil"oomw"&&{oomw})exitwith{hint'Please wait until the current action is finished'};oomw=true;_this spawn{private["_okta","_kuhc","_qgcp","_nrcc","_erca","_pzsm","_bkbz","_kuvp","_cftp","_ltux"];_upqp=["ainvpknlmstpsnonwrfldnon_ainvpknlmstpsnonwrfldnon_medic","ainvpknlmstpsnonwrfldnon_medic","ainvpknlmstpsnonwrfldnon_medic0s","amovpercmstpslowwrfldnon_amovpknlmstpslowwrfldnon","amovpercmstpsraswrfldnon_amovpknlmstpsraswrfldnon","amovppnemstpsraswrfldnon_amovpknlmstpsraswrfldnon"];_okta=[_this,0,5,[1]]call clht;_kuhc=[_this,1,"",[""]]call clht;_qgcp=[_this,2,[],[[]]]call clht;_nrcc=[_this,3,{},[{}]]call clht;_erca=[_this,4,{},[{}]]call clht;_pzsm=[_this,5,player,[player]]call clht;guao=[]spawn{while{oomw}do{"ainvpknlmstpslaywrfldnon_medic"call wyyl;waitUntil{animationState player!="ainvpknlmstpslaywrfldnon_medic"}}};wrck=(findDisplay 46)displayAddEventHandler['KeyDown',"
		if ( (_this select 1) in ((actionKeys 'MoveForward') + (actionKeys 'TurnLeft') + (actionKeys 'TurnRight') + (actionKeys 'MoveBack')) ) then {
			terminate guao;
		};
	"];_bkbz=(_okta/100);for"_kuvp"from 1 to 100 do{[format[_kuhc,(str _kuvp)+'%']]call gzyq;sleep _bkbz;if(scriptDone guao||!alive player||vehicle player!=player)exitwith{}};oomw=false;(findDisplay 46)displayRemoveEventHandler['KeyDown',wrck];if(!scriptDone guao&&alive player&&vehicle player==player)then{"amovpknlmstpsraswrfldnon"call wyyl;[format[_kuhc,'100%'],1]call gzyq;_qgcp call _nrcc}else{[]call{if(!alive player)exitwith{['',0]call gzyq};if(vehicle player!=player)exitwith{['Action interrupted',3]call gzyq;_qgcp call _erca;_cftp=assignedVehicleRole player;_ltux=vehicle player;player setPosATL getPosATL player;[]call{if(_cftp select 0=="Driver")exitwith{player moveInDriver _ltux};if(_cftp select 0=="Cargo")exitwith{player moveInCargo _ltux};if(_cftp select 0=="Turret")exitwith{player moveInTurret[_ltux,_cftp select 1]};if(_cftp select 0=="Commander")exitwith{player moveInCommander _ltux}}};['Action interrupted',3]call gzyq;_qgcp call _erca;"amovpknlmstpsraswrfldnon"call wyyl}}};