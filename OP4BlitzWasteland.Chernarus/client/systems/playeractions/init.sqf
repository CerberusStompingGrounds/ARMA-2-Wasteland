qnsh=missionNamespace getVariable['qnsh',[]];oomw=false;if(!hasInterface)exitwith{};[]spawn{qqwk=[];uvpu=[];oirt=missionNamespace getVariable['oirt',[]];islu=[];_pnmn=5;waitUntil{!isNull player&&player==player};waitUntil{!(isNull(findDisplay 46))};player addEventHandler['Respawn',{{(_this select 1)removeAction _x;true}count qqwk;qqwk=[]}];_yizj={private["_azgz","_vkku","_zbpt"];_azgz=_this select 0;_vkku=_this select 1;_zbpt=_this select 2;islu set[_vkku,_zbpt];uvpu set[_vkku,_azgz];private["_xcne","_yjyt"];_xcne=_this select 3;_yjyt=_xcne select 0;if(typeName _yjyt=="CODE")then{_yjyt=[_azgz]call _yjyt};if((oirt select _vkku)!=_yjyt)then{if(count qqwk>_vkku&&{!isNil{qqwk select _vkku}})then{player removeAction(qqwk select _foreachindex)};qqwk set[_vkku,player addAction[_yjyt,"client\systems\playerActions\functions\fhcy.sqf",_vkku,(_x select 4),false,true,format["cursorTarget == awwj || islu select %1",_vkku]]];oirt set[_vkku,_yjyt]}};while{true}do{if(vehicle player==player)then{_njnv=eyePos player;_nwpg=[_njnv,_pnmn,getDir player]call bis_fnc_relpos;_svla=(([positionCameraToWorld[0,0,0],positionCameraToWorld[0,0,1]]call bis_fnc_vectorfromxtoy)call bis_fnc_unitvector)select 2;_nwpg set[2,_svla*_pnmn+(_njnv select 2)];_suca=lineIntersectsWith[_njnv,_nwpg,objNull,player,true,true];if(count _suca==1&&cursorTarget in _suca)then{awwj=_suca select(count _suca)-1}else{if((player distance cursorTarget)<=_pnmn)then{awwj=cursorTarget}else{awwj=objNull}};{_xcne=_x;_vkku=_foreachindex;if(!isNull awwj&&{[awwj]call(_x select 1)})then{[awwj,_foreachindex,false,_xcne]call _yizj}else{_lvie=objNull;if((_x select 3)>=0)then{{if([_x]call(_xcne select 1)&&_x distance player<=(_xcne select 3))exitwith{_lvie=_x};true}count(nearestObjects[getPosATL player,["All"],_pnmn]);if(!isNull _lvie)then{[_lvie,_foreachindex,true,_xcne]call _yizj}};if(isNull _lvie&&count qqwk>_foreachindex&&{!isNil{qqwk select _foreachindex}})then{player removeAction(qqwk select _foreachindex);qqwk set[_foreachindex,nil];oirt set[_foreachindex,""]}};true}forEach qnsh}else{{if(count qqwk>_foreachindex&&{!isNil{qqwk select _foreachindex}})then{player removeAction(qqwk select _foreachindex);qqwk set[_foreachindex,nil];oirt set[_foreachindex,""]}}forEach qnsh};sleep 0.3}};