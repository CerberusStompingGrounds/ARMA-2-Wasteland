#define ASNUMBER(NUMBER) (if(typeName (NUMBER) != "SCALAR") then {parseNumber (NUMBER)} else {NUMBER})
if(!isServer)exitwith{};[]spawn{gshg=objNull;mvtq=objNull;opdu=[objNull,objNull];"gshg"addPublicVariableEventHandler{private["_qmsn","_mfpw","_pive","_iwyu","_omul","_llwe","_sgcv","_items"];_qmsn=owner([_this select 1,0,objNull,[player]]call clht);_mfpw=[_this select 1,1,objNull,[objNull]]call clht;_pive=[_this select 1,2,"",[""]]call clht;
#ifdef LOG_LOGGING
diag_log format['Player %1 (#%2) requesting %3 from %4',name(_this select 1 select 0),_qmsn,_pive,_mfpw];
#endif
_iwyu=objNull;_omul=_mfpw getVariable['LOG_contents',[]];{if(!isNull _iwyu)exitwith{};if(!isNil"_x")then{if(typeName _x=="ARRAY")then{if(_x select 0==_pive)then{if(count _x==2)then{_iwyu=[_x select 0,[0,0,0]]call(('createVehicle'call u_fnc_db)select 1);if(ASNUMBER(_x select 1)==1)then{_omul set[_foreachindex,"REMOVE"];_omul=_omul -["REMOVE"]}else{(_omul select _foreachindex)set[1,ASNUMBER(_x select 1)-1]}}else{_iwyu=[_x select 0,[0,0,0]]call(('createVehicle'call u_fnc_db)select 1);_iwyu setDamage ASNUMBER(_x select 1);clearMagazineCargoGlobal _iwyu;clearWeaponCargoGlobal _iwyu;_llwe=_x select 2;_sgcv=_x select 3;for"_jroz"from 0 to(count(_llwe select 0))do{_iwyu addMagazineCargoGlobal[_llwe select 0 select _jroz,ASNUMBER(_llwe select 1 select _jroz)]};for"_jroz"from 0 to(count(_sgcv select 0))do{_iwyu addWeaponCargoGlobal[_sgcv select 0 select _jroz,ASNUMBER(_sgcv select 1 select _jroz)]};_iwyu setVariable['LOG_contents',_x select 4,true];_omul set[_foreachindex,"REMOVE"];_omul=_omul -["REMOVE"]}}}else{if(typeOf _x==_pive)then{_x enableSimulation true;_iwyu=_x;_omul set[_foreachindex,nil]}}}}forEach _omul;_mfpw setVariable['LOG_contents',_omul,true];nyea=_iwyu;_qmsn publicVariableClient"nyea"};"mvtq"addPublicVariableEventHandler{private["_qmsn","_tund","_waiz"];_tund=[_this select 1,0,objNull,[objNull]]call clht;_waiz=[_this select 1,1,[0,0,0],[[]],[3]]call clht;_qmsn=owner _tund;if(local _tund)then{_tund setVelocity _waiz}else{ukad=[_tund,_waiz];_qmsn publicVariableClient"ukad"}};"opdu"addPublicVariableEventHandler{(_this select 1 select 1)setOwner owner(_this select 1 select 0)}};